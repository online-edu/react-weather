(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,a){e.exports=a(387)},183:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(47),o=a.n(c),i=(a(183),a(48)),l=a(49),s=a(57),m=a(51),u=a(50),d=a(56),f=a(4),p=a.n(f),h=a(32),y={chartContainer:{width:"100%",height:"100px"}},v=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("div",{className:"mb-3",style:y.chartContainer},r.a.createElement(h.c,null,r.a.createElement(h.b,{data:e,margin:{top:0,right:30,left:30,bottom:0}},r.a.createElement(h.e,{axisLine:!1,tickLine:!1,tickMargin:10,dataKey:"hours"}),r.a.createElement(h.d,null),r.a.createElement(h.a,{type:"monotone",dataKey:"temp",stroke:"#ffcb02",fill:"#fff6d3",dot:!0,name:"Temperature"}))))}}],[{key:"propTypes",get:function(){return{data:p.a.array.isRequired}}}]),t}(n.PureComponent),g=function(){return r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},b=(a(365),[{name:"Vancouver",country:"CA",aria:"Flag: Canada",icon:"\ud83c\udde8\ud83c\udde6"},{name:"Chicago",country:"US",aria:"Flag: United States",icon:"\ud83c\uddfa\ud83c\uddf8"},{name:"Mumbai",country:"IN",aria:"Flag: India",icon:"\ud83c\uddee\ud83c\uddf3"},{name:"Berlin",country:"DE",aria:"Flag: Germany",icon:"\ud83c\udde9\ud83c\uddea"},{name:"Tokyo",country:"JP",aria:"Flag: Japan",icon:"\ud83c\uddef\ud83c\uddf5"},{name:"London",country:"GB",aria:"Flag: United Kingdom",icon:"\ud83c\uddec\ud83c\udde7"}]),E=function(e){var t=e.cityClick,a=e.loader;return r.a.createElement("div",{className:"card mb-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Popular Cities",a&&r.a.createElement("div",{className:"float-right"},r.a.createElement(g,null))),r.a.createElement("div",{className:"row"},b&&b.map(function(e,a){return r.a.createElement("div",{className:"col text-center",key:a},r.a.createElement("button",{type:"button",className:"btn btn-link text-decoration-none city__btn",onClick:function(){return t(e)},onKeyPress:function(){return t(e)}},r.a.createElement("div",null,r.a.createElement("span",{className:"text-muted"},e.name)),r.a.createElement("span",{className:"city__btn--country-icon",role:"img","aria-label":e.aria},e.icon)))}))))},w=(a(366),function(){return r.a.createElement("footer",{className:"weather-footer py-3"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"mb-0 font-weight-normal"},"\xa9\xa0",(new Date).getFullYear(),"\xa0Weather App Inc. All right reserved.")))}),k=function(){return r.a.createElement("input",{type:"text",className:"form-control mr-sm-2","aria-label":"City input",placeholder:"Type a city name...",disabled:!0})},N=(a(367),function(){return r.a.createElement("nav",{className:"navbar sticky-top weather-header pl-1"},r.a.createElement("button",{type:"button",className:"navbar-brand btn-link btn weather-header__brand"},"Wether App",r.a.createElement("span",{role:"img","aria-label":"Weather"},"\u2601\ufe0f")),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement(k,null)))}),C=a(31),O=(a(368),function(e){var t=e.item,a=e.forecastClick;return r.a.createElement("div",{className:"col text-center rounded forecast__day"},r.a.createElement("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:a,onKeyPress:a},r.a.createElement("div",null,r.a.createElement("span",{className:"text-muted"},t.day)),r.a.createElement("img",{src:t.icon,alt:t.alt}),r.a.createElement("p",{className:"text-muted text-center"},r.a.createElement("span",{className:"mr-2"},t.maxTemp,"\xb0C"),r.a.createElement("span",null,t.minTemp,"\xb0C"))))}),j=function(e){var t=e.data,a=e.forecastClick;return r.a.createElement("div",{className:"row"},t&&t.map(function(e,t){return r.a.createElement(O,{forecastClick:function(){return a(e)},item:e,key:t})}))},x=function(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"card-title"},t.city.name," \u2013 ",t.city.country,"\xa0\xa0\xa0|",r.a.createElement("img",{src:t.weather.icon,alt:t.weather.name}),Math.round(t.main.temp),"\xb0C ",t.weather.main,"\xa0(",t.day,")"),r.a.createElement(v,{data:t.chart}))},S=a(55),_=a(152),W=a(59),T="http://openweathermap.org/img/w",P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=a(151),D=a.n(A),F=function(e,t){return D.a.get(e,t).then(function(e){return Promise.resolve(e.data)}).catch(function(e){return Promise.reject(e.response.data)})},I="units=metric&APPID=".concat("8f10d0c12d0872124c79bd426d5d1003"),J=function(e){return new Date(e).getDate()},M=function(e){return new Date(e).getDay()},L=function(e,t,a,n,r){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{day:P[M(e)],weather:Object(W.a)({},t,{icon:c?t.icon:"".concat(T,"/").concat(t.icon,".png")}),main:a,city:n,chart:r}},U=function(e){return e.map(function(e){var t=e.dt_txt,a=e.main.temp,n=new Date(t).getHours(),r=n>=12?" pm":" am";return{hours:n=((n%=12)||12)+r,temp:a}})},K=function(e){var t=function(){var e=sessionStorage.getItem("data");return e&&JSON.parse(e)||[]}(),a=function(){var e=sessionStorage.getItem("city");return e&&JSON.parse(e)||{}}(),n=e.date,r=e.day,c=e.maxTemp,o=e.alt,i="".concat(n,"_").concat(r);return L((new Date).setDate(n),Object(W.a)({},e,{main:o}),{temp:c},a,U(t[i]),!0)},B=function(e,t){return F("".concat("https://api.openweathermap.org/data/2.5","/forecast?q=").concat(e,",").concat(t,"&").concat(I)).then(function(e){var t=e.city,a=e.list,n=U(a.slice(0,8)),r=[],c={};a.reduce(function(e,t){var a=t.dt_txt,n=t.main,o=Object(C.a)(t.weather,1)[0],i=o.icon,l=o.main,s=J(a),m=J(e.dt_txt),u=M(a),d=P[u].substring(0,3),f="".concat(s,"_").concat(d),p=c[f]||[];return c=Object(W.a)({},c,Object(S.a)({},f,[].concat(Object(_.a)(p),[t]))),s!==m&&r.push(function(e,t,a,n,r,c){var o=c.temp_min,i=c.temp_max;return{date:e,id:t,minTemp:Math.round(o),maxTemp:Math.round(i),icon:"".concat(T,"/").concat(a,".png"),alt:n,day:r}}(s,u,i,l,d,n)),t},[]),sessionStorage.setItem("data",JSON.stringify(c)),sessionStorage.setItem("city",JSON.stringify(t));var o=Object(C.a)(a,1)[0],i=o.dt_txt,l=o.main,s=Object(C.a)(o.weather,1)[0];return Promise.resolve({forecast:r,current:L(i,s,l,t,n)})})},R=function(e){var t=e.forecast,a=e.current,c=Object(n.useState)(a),o=Object(C.a)(c,2),i=o[0],l=o[1];return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(x,{data:i}),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(j,{data:t,forecastClick:function(e){l(K(e))}})))},q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={city:"",data:{},loader:!0,err:{network:!1,message:""}},e.onCityClick=e.onCityClick.bind(Object(u.a)(e)),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadWeather("Vancouver","CA")}},{key:"onCityClick",value:function(e){var t=e.name,a=e.country;this.loadWeather(t,a)}},{key:"loadWeather",value:function(e,t){var a=this;this.setState({loader:!0}),B(e,t).then(function(e){a.setState({data:e})}).catch(function(e){a.setState({err:{network:!0,message:e.message}})}).finally(function(){return a.setState({loader:!1})})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.loader,n=e.err;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null),r.a.createElement("main",null,r.a.createElement("div",{className:"container py-4 weather"},r.a.createElement(E,{cityClick:this.onCityClick,loader:a}),!a&&!n.network&&r.a.createElement(R,{current:t.current,chart:t.chart,forecast:t.forecast}),n.network&&r.a.createElement("div",{class:"alert alert-danger",role:"alert"},n.message))),r.a.createElement(w,null))}}]),t}(n.Component),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(q,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");G?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):V(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):V(t,e)})}}()}},[[178,1,2]]]);
//# sourceMappingURL=main.7c2a46f7.chunk.js.map